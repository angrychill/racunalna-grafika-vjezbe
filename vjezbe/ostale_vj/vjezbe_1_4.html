<!doctype html>
<html lang="hr">
	<head>
		<meta charset="UTF-8">
		<title>Crtanje linija</title>
	</head>

	<body>
		<h1>Crtanje linija</h1>	
		<canvas id="canvas1" width="600" height="600" style="border:5px solid black">
			Vaš preglednik ne podržava HTML5 canvas.
		</canvas>

		<script>
			class GKS {
				

				constructor(platno, xmin, xmax, ymin, ymax) {
					this.g = platno.getContext("2d");
					this.w = platno.width;
					this.h = platno.height;
					this.x_min = xmin;
					this.x_max = xmax;
					this.y_min = ymin;
					this.y_max = ymax;

					this.s_x = this.w / (this.x_max -this.x_min);
					this.s_y = -this.h / (this.y_max - this.y_min);
					this.p_x = -this.s_x * this.x_min;
					this.p_y = -this.s_y * this.y_max;
				}
				nacrtajGlavneOsi(koristiOznake = false, razmak = 1) {
					this.g.beginPath();
					this.g.moveTo(0, this.p_y);
					this.g.lineTo(this.w, this.p_y);
					this.g.moveTo(this.p_x, 0);
					this.g.lineTo(this.p_x, this.h);
					this.g.strokeStyle = "black";
					this.g.lineWidth = 2;
					this.g.stroke()

					if (koristiOznake == true){
						this.g.font = "14px Times New Roman";
						var offset = 14;

						for (let x = this.x_min; x<= this.x_max; x += razmak) {
							var koords = this.vratiPretvoreneKoord(x, 0);
							this.g.fillText(x, koords.x, koords.y + offset);
						}

					}
				}

				postaviNa(x, y) {
					var kords = this.vratiPretvoreneKoord(x,y);
					this.g.moveTo(kords.x, kords.y);
					this.g.beginPath();
				}

				linijaDo(x, y) {
					var kords = this.vratiPretvoreneKoord(x, y);
					this.g.lineTo(kords.x, kords.y);
				}
				
				koristiBoju(c) {
					
					this.g.strokeStyle = c;

				}
				povuciLiniju() {
					this.g.stroke();
					
				}

				vratiPretvoreneKoord(x, y) {
					var x_i = this.p_x + this.s_x * x;
					var y_i = this.p_y + this.s_y * y;
					return {x: x_i, y: y_i };
				}
				
			}

		    window.onload = function() {
				// priprema
				var platno1 = document.getElementById("canvas1");
				if(!platno1) alert("Greška - nema platna!");
				var w = platno1.width;
				var h = platno1.height;
				var g = platno1.getContext("2d");
				
				var x_min = -10;
				var x_max = 10;
				var y_min = -10;
				var y_max = 10;
				var gks = new GKS(platno1, x_min, x_max, y_min, y_max);
				gks.nacrtajGlavneOsi(true);

				gks.postaviNa(4, 4);
				gks.koristiBoju("black");
				gks.linijaDo(5, 5);


            }

			
			

		</script>
	</body>
</html>